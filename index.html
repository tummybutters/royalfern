<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Fern Barber Studio | San Diego</title>
    <link rel="preload" as="video" href="/media/hero/video1.mp4" type="video/mp4">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Cinzel:wght@400;600&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #144E47;
            --gold: #D2B26A;
            --white: #FFFFFF;
            --cream: #F5F0E8;
            --dark: #0A2E2A;
            --charcoal: #2C3E3A;
        }

        html {
            scroll-behavior: smooth;
            overflow-x: clip;
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background: var(--cream);
            color: var(--primary);
        }

        /* Navigation */
        .main-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 25px 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            transition: all 0.4s ease;
        }

        .main-nav.scrolled {
            background: rgba(245, 240, 232, 0.95);
            backdrop-filter: blur(20px);
            padding: 18px 60px;
            box-shadow: 0 2px 30px rgba(20, 78, 71, 0.1);
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            min-width: 0;
        }

        .nav-logo-icon {
            width: 45px;
            height: 45px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
        }

        .nav-logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            transition: all 0.4s ease;
        }

        .nav-logo:hover .nav-logo-icon {
            background: var(--primary);
        }

        .nav-logo:hover .nav-logo-icon img {
            filter: saturate(0.95) contrast(1.05);
        }

        .nav-logo-text {
            font-family: 'Cinzel', serif;
            font-size: 14px;
            letter-spacing: 2px;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .nav-links a {
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--primary);
            text-decoration: none;
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--gold);
            transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links .nav-cta {
            padding: 14px 28px;
            background: var(--primary);
            color: var(--white);
            font-family: 'Cinzel', serif;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-decoration: none;
            border: 2px solid var(--primary);
            transition: all 0.4s ease;
        }

        .nav-links .nav-cta:hover {
            background: transparent;
            color: var(--primary);
        }

        .mobile-menu-btn {
            display: none;
            flex-direction: column;
            gap: 6px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }

        .mobile-menu-btn span {
            display: block;
            width: 28px;
            height: 2px;
            background: var(--primary);
            transition: all 0.3s ease;
        }

        .mobile-menu-btn[aria-expanded="true"] span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .mobile-menu-btn[aria-expanded="true"] span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn[aria-expanded="true"] span:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        .mobile-nav-panel {
            display: none;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 120px 40px 100px;
            position: relative;
            background: var(--cream);
            overflow: hidden;
        }

        .hero-pattern {
            position: absolute;
            inset: 0;
            opacity: 0.03;
            background-image: repeating-linear-gradient(
                45deg,
                var(--primary) 0px,
                var(--primary) 1px,
                transparent 1px,
                transparent 20px
            );
            pointer-events: none;
        }

        .hero-header {
            padding: 40px 0;
            display: flex;
            justify-content: center;
            position: relative;
            margin-bottom: 20px;
        }

        .hero-logo-center {
            text-align: center;
        }

        .hero-logo-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .hero-logo-text {
            font-family: 'Cinzel', serif;
            font-size: 24px;
            letter-spacing: 6px;
            color: var(--primary);
        }

        .hero-established {
            font-size: 11px;
            letter-spacing: 3px;
            color: var(--gold);
            margin-top: 12px;
            text-transform: uppercase;
        }

        .hero-frame {
            position: relative;
            width: 100%;
            max-width: 1100px;
            min-height: 660px;
            border: 1px solid rgba(20, 78, 71, 0.2);
            padding: 50px;
        }

        .frame-corner {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid var(--gold);
        }

        .frame-corner.tl { top: -1px; left: -1px; border-right: none; border-bottom: none; }
        .frame-corner.tr { top: -1px; right: -1px; border-left: none; border-bottom: none; }
        .frame-corner.bl { bottom: -1px; left: -1px; border-right: none; border-top: none; }
        .frame-corner.br { bottom: -1px; right: -1px; border-left: none; border-top: none; }

        .hero-inner {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            min-height: 560px;
            align-items: center;
        }

        .hero-image {
            position: relative;
            height: 100%;
            min-height: 560px;
            overflow: hidden;
        }

        .hero-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(20%) contrast(1.05);
        }

        .hero-video-stack {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 0;
            background: #0f201d;
        }

        .hero-video-stack::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 5;
            background:
                radial-gradient(circle at 16% 18%, rgba(210, 178, 106, 0.18), transparent 42%),
                linear-gradient(135deg, rgba(20, 78, 71, 0.96), rgba(10, 46, 42, 0.96)),
                repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.025) 0 2px, transparent 2px 13px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 280ms ease;
        }

        .hero-video-stack:not(.is-initial-media-ready)::before {
            opacity: 1;
        }

        .hero-video-card {
            position: absolute;
            inset: 0;
            overflow: hidden;
            border: 1px solid rgba(20, 78, 71, 0.12);
            box-shadow: 0 28px 55px rgba(20, 78, 71, 0.12);
            transition: transform 540ms cubic-bezier(0.25, 1, 0.5, 1), opacity 540ms ease;
            will-change: transform, opacity;
            transform-origin: center center;
            background: #122824;
        }

        .hero-video-card video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            filter: sepia(22%) saturate(0.82) contrast(1.04);
            background: #0e1b19;
        }

        .hero-video-card[data-video-index="0"] video {
            opacity: 1;
            transition: opacity 320ms ease;
        }

        .hero-video-stack:not(.is-initial-media-ready) .hero-video-card[data-video-index="0"] video {
            opacity: 0;
        }

        .hero-video-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(to top, rgba(10, 46, 42, 0.55), rgba(10, 46, 42, 0.08) 42%, rgba(10, 46, 42, 0.02)),
                linear-gradient(to right, rgba(210, 178, 106, 0.08), transparent 38%);
            pointer-events: none;
        }

        .hero-video-card::before {
            content: '';
            position: absolute;
            inset: 14px;
            border: 1px solid rgba(210, 178, 106, 0.28);
            pointer-events: none;
            z-index: 1;
        }

        .hero-video-card.is-leaving-left {
            transform: translateX(-18%) translateY(2px) rotate(-6deg) scale(0.98) !important;
            opacity: 0.92 !important;
            z-index: 60 !important;
            transition: transform 390ms cubic-bezier(0.4, 0, 0.2, 1), opacity 390ms ease !important;
        }

        .hero-video-card.is-leaving-under {
            transform: translateX(8px) translateY(20px) rotate(0.5deg) scale(0.9) !important;
            opacity: 0.3 !important;
            z-index: 6 !important;
            transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms ease !important;
        }

        .hero-video-card.is-leaving-back {
            transform: translateX(14px) translateY(10px) rotate(0.8deg) scale(0.95) !important;
            opacity: 0.58 !important;
            z-index: 18 !important;
            transition: transform 380ms cubic-bezier(0.4, 0, 0.2, 1), opacity 380ms ease !important;
        }

        .hero-video-overlay {
            position: absolute;
            inset: 0;
            z-index: 80;
            pointer-events: none;
        }

        .hero-video-logo-badge {
            position: absolute;
            top: 18px;
            left: 18px;
            width: 78px;
            height: 78px;
            border: 1px solid rgba(210, 178, 106, 0.35);
            background: rgba(10, 46, 42, 0.55);
            backdrop-filter: blur(6px);
            padding: 8px;
            display: grid;
            place-items: center;
        }

        .hero-video-logo-badge img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: saturate(0.9) contrast(1.02);
        }

        .hero-video-label {
            position: absolute;
            left: 18px;
            bottom: 18px;
            background: rgba(10, 46, 42, 0.72);
            border: 1px solid rgba(210, 178, 106, 0.3);
            color: var(--white);
            padding: 10px 12px;
            backdrop-filter: blur(6px);
            min-width: 180px;
        }

        .hero-video-label span {
            display: block;
            font-size: 10px;
            letter-spacing: 2.2px;
            text-transform: uppercase;
            color: rgba(210, 178, 106, 0.9);
            margin-bottom: 4px;
        }

        .hero-video-label strong {
            display: block;
            font-family: 'Cinzel', serif;
            font-size: 13px;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .hero-video-controls {
            position: absolute;
            inset: 0;
            z-index: 6;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            pointer-events: none;
        }

        .hero-video-control {
            width: 54px;
            height: 54px;
            border-radius: 999px;
            border: 1px solid rgba(20, 78, 71, 0.2);
            background: rgba(245, 240, 232, 0.82);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
            pointer-events: auto;
            box-shadow: 0 10px 20px rgba(10, 46, 42, 0.12);
        }

        .hero-video-control:hover {
            background: var(--primary);
            color: var(--gold);
            border-color: rgba(20, 78, 71, 0.8);
            transform: scale(1.04);
        }

        .hero-video-control svg {
            width: 22px;
            height: 22px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }

        .hero-video-dots {
            position: absolute;
            left: 50%;
            bottom: 18px;
            transform: translateX(-50%);
            z-index: 6;
            display: flex;
            gap: 8px;
            pointer-events: auto;
        }

        .hero-video-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            border: none;
            background: rgba(255, 255, 255, 0.35);
            cursor: pointer;
            transition: all 0.35s ease;
            padding: 0;
        }

        .hero-video-dot.is-active {
            width: 28px;
            background: var(--gold);
        }

        .image-border {
            position: absolute;
            inset: 20px;
            border: 1px solid rgba(210, 178, 106, 0.4);
            pointer-events: none;
            z-index: 90;
        }

        .hero-content {
            text-align: center;
            padding: 20px;
        }

        .hero-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(36px, 4vw, 56px);
            color: var(--primary);
            line-height: 1.3;
            margin-bottom: 25px;
        }

        .hero-title span {
            display: block;
            font-size: 0.55em;
            letter-spacing: 8px;
            color: var(--gold);
            margin-bottom: 12px;
        }

        .divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 35px 0;
        }

        .divider-line {
            width: 80px;
            height: 1px;
            background: var(--primary);
        }

        .divider-icon {
            width: 10px;
            height: 10px;
            background: var(--gold);
            transform: rotate(45deg);
        }

        .hero-text {
            font-size: 15px;
            line-height: 2;
            color: rgba(20, 78, 71, 0.75);
            max-width: 400px;
            margin: 0 auto 40px;
        }

        .hero-cta {
            display: inline-block;
            padding: 18px 50px;
            background: var(--primary);
            color: var(--white);
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-size: 13px;
            letter-spacing: 3px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
            border: 2px solid var(--primary);
        }

        .hero-cta:hover {
            background: var(--gold);
            color: var(--primary);
            border-color: var(--gold);
        }

        .services-strip {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--primary);
            padding: 30px 60px;
            display: flex;
            justify-content: center;
            gap: 60px;
            flex-wrap: wrap;
        }

        .strip-item {
            color: var(--white);
            font-size: 12px;
            letter-spacing: 3px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .strip-dot {
            width: 8px;
            height: 8px;
            background: var(--gold);
            border-radius: 50%;
        }

        /* Section Styles */
        section {
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-eyebrow {
            font-size: 12px;
            letter-spacing: 4px;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 15px;
        }

        .section-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(32px, 4vw, 48px);
            color: var(--primary);
        }

        /* Services Section */
        .services {
            padding: 120px 60px;
            background: var(--white);
        }

        .services-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }

        .service-card {
            background: var(--cream);
            padding: 50px 40px;
            text-align: center;
            border: 1px solid rgba(20, 78, 71, 0.1);
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gold);
            transform: scaleX(0);
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(20, 78, 71, 0.1);
        }

        .service-card:hover::before {
            transform: scaleX(1);
        }

        .service-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 25px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .service-icon svg {
            width: 32px;
            height: 32px;
            stroke: var(--primary);
        }

        .service-name {
            font-family: 'Cinzel', serif;
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .service-desc {
            font-size: 14px;
            line-height: 1.8;
            color: rgba(20, 78, 71, 0.7);
            margin-bottom: 25px;
        }

        .service-price {
            font-family: 'Cinzel', serif;
            font-size: 28px;
            color: var(--gold);
        }

        .service-price span {
            font-size: 14px;
            color: rgba(20, 78, 71, 0.5);
        }

        /* About Section */
        .about {
            padding: 120px 60px;
            background: var(--cream);
        }

        .about-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            align-items: center;
        }

        .about-image {
            position: relative;
        }

        .about-image-main {
            position: relative;
            z-index: 1;
        }

        .about-image-main.before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
            height: 600px;
        }

        .about-image-panel {
            position: relative;
            overflow: hidden;
            background: var(--charcoal);
        }

        .about-image-panel img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(12%);
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .about-image:hover .about-image-panel img {
            transform: scale(1.03);
        }

        .about-image-label {
            position: absolute;
            left: 14px;
            bottom: 14px;
            background: rgba(10, 46, 42, 0.75);
            border: 1px solid rgba(210, 178, 106, 0.35);
            color: var(--white);
            padding: 8px 10px;
            font-size: 10px;
            letter-spacing: 2px;
            text-transform: uppercase;
            z-index: 2;
        }

        .about-image-divider {
            position: absolute;
            top: 20px;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            background: rgba(210, 178, 106, 0.5);
            z-index: 2;
            pointer-events: none;
        }

        .about-image-divider::before {
            content: 'Before / After';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-90deg);
            transform-origin: center;
            background: var(--cream);
            color: var(--primary);
            border: 1px solid rgba(210, 178, 106, 0.35);
            padding: 6px 10px;
            font-size: 10px;
            letter-spacing: 1.8px;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .about-image-frame {
            position: absolute;
            inset: -20px;
            border: 2px solid var(--gold);
            z-index: 0;
        }

        .about-image-accent {
            position: absolute;
            bottom: -30px;
            right: -30px;
            width: 200px;
            height: 200px;
            background: var(--primary);
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .about-image-accent .number {
            font-family: 'Cinzel', serif;
            font-size: 48px;
            color: var(--gold);
            line-height: 1;
        }

        .about-image-accent .text {
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--white);
            margin-top: 10px;
        }

        .about-text {
            padding: 20px 0;
        }

        .about-text h2 {
            font-family: 'Cinzel', serif;
            font-size: clamp(28px, 3vw, 40px);
            color: var(--primary);
            line-height: 1.4;
            margin-bottom: 30px;
        }

        .about-text p {
            font-size: 15px;
            line-height: 2;
            color: rgba(20, 78, 71, 0.75);
            margin-bottom: 20px;
        }

        .about-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-top: 40px;
        }

        .about-feature {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .about-feature-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .about-feature-icon svg {
            width: 20px;
            height: 20px;
            stroke: var(--gold);
        }

        .about-feature-text h4 {
            font-family: 'Cinzel', serif;
            font-size: 14px;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .about-feature-text p {
            font-size: 13px;
            color: rgba(20, 78, 71, 0.6);
            margin: 0;
        }

        /* Gallery Section */
        .gallery {
            padding: 120px 60px;
            background: var(--white);
        }

        .gallery-grid {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            cursor: pointer;
        }

        .gallery-item.featured {
            grid-column: span 2;
            grid-row: span 2;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            inset: 0;
            background: rgba(20, 78, 71, 0.85);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-overlay h4 {
            font-family: 'Cinzel', serif;
            font-size: 18px;
            color: var(--white);
            margin-bottom: 8px;
        }

        .gallery-overlay p {
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--gold);
        }

        /* Barbers Section */
        .barbers {
            padding: 120px 60px;
            background: var(--cream);
        }

        .barbers-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }

        .barber-card {
            text-align: center;
            position: relative;
        }

        .barber-image {
            position: relative;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .barber-image img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            filter: sepia(15%);
            transition: all 0.5s ease;
        }

        .barber-card:hover .barber-image img {
            filter: sepia(0%);
            transform: scale(1.05);
        }

        .barber-frame {
            position: absolute;
            inset: 15px;
            border: 1px solid rgba(210, 178, 106, 0.5);
            pointer-events: none;
        }

        .barber-social {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            display: flex;
            gap: 15px;
            opacity: 0;
            transition: all 0.4s ease;
        }

        .barber-card:hover .barber-social {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .barber-social a {
            width: 40px;
            height: 40px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .barber-social a:hover {
            background: var(--gold);
        }

        .barber-social a svg {
            width: 18px;
            height: 18px;
            stroke: var(--white);
        }

        .barber-name {
            font-family: 'Cinzel', serif;
            font-size: 22px;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .barber-role {
            font-size: 13px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--gold);
        }

        /* Testimonials */
        .testimonials {
            padding: 120px 60px;
            background: var(--primary);
            position: relative;
            overflow: hidden;
        }

        .testimonials::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                45deg,
                rgba(210, 178, 106, 0.03) 0px,
                rgba(210, 178, 106, 0.03) 1px,
                transparent 1px,
                transparent 20px
            );
        }

        .testimonials-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .testimonials .section-eyebrow {
            color: var(--gold);
        }

        .testimonials .section-title {
            color: var(--white);
        }

        .testimonials-header {
            display: grid;
            grid-template-columns: 1.2fr auto;
            gap: 30px;
            align-items: end;
            margin-bottom: 28px;
        }

        .testimonials-title-wrap {
            text-align: left;
        }

        .testimonials-title-wrap .section-title {
            text-align: left;
        }

        .testimonial-trust-bar {
            display: flex;
            align-items: center;
            gap: 14px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .trust-pill {
            background: rgba(245, 240, 232, 0.08);
            border: 1px solid rgba(210, 178, 106, 0.22);
            color: var(--white);
            padding: 10px 14px;
            font-size: 12px;
            letter-spacing: 1.8px;
            text-transform: uppercase;
            backdrop-filter: blur(8px);
        }

        .trust-pill strong {
            color: var(--gold);
            margin-right: 6px;
            font-family: 'Cinzel', serif;
            font-weight: 600;
        }

        .testimonial-carousel-shell {
            position: relative;
            margin-top: 22px;
            border: 1px solid rgba(210, 178, 106, 0.18);
            background: rgba(255, 255, 255, 0.03);
            padding: 26px;
            overflow: hidden;
        }

        .testimonial-carousel-shell::before {
            content: '';
            position: absolute;
            inset: 14px;
            border: 1px solid rgba(210, 178, 106, 0.12);
            pointer-events: none;
        }

        .testimonial-carousel-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            position: relative;
            z-index: 2;
        }

        .testimonial-carousel-note {
            color: rgba(255, 255, 255, 0.72);
            font-size: 12px;
            letter-spacing: 1.4px;
            text-transform: uppercase;
        }

        .testimonial-control-group {
            display: flex;
            gap: 10px;
        }

        .testimonial-arrow {
            width: 44px;
            height: 44px;
            border-radius: 999px;
            border: 1px solid rgba(210, 178, 106, 0.28);
            background: rgba(245, 240, 232, 0.85);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .testimonial-arrow:hover {
            background: var(--gold);
            border-color: var(--gold);
            transform: translateY(-1px);
        }

        .testimonial-arrow svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }

        .testimonial-viewport {
            overflow: hidden;
            cursor: grab;
            position: relative;
            z-index: 2;
            user-select: none;
            touch-action: pan-y;
        }

        .testimonial-viewport.is-dragging {
            cursor: grabbing;
        }

        .testimonial-track {
            display: flex;
            gap: 18px;
            will-change: transform;
        }

        .testimonial-card {
            flex: 0 0 calc((100% - 54px) / 4);
            min-width: 260px;
            background: var(--cream);
            border: 1px solid rgba(20, 78, 71, 0.14);
            padding: 18px 18px 16px;
            display: flex;
            flex-direction: column;
            min-height: 290px;
            position: relative;
            box-shadow: 0 16px 30px rgba(10, 46, 42, 0.08);
        }

        .testimonial-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gold);
            opacity: 0.85;
        }

        .testimonial-stars {
            color: var(--gold);
            letter-spacing: 2px;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .testimonial-card-text {
            color: rgba(20, 78, 71, 0.85);
            line-height: 1.7;
            font-size: 14px;
            margin-bottom: 14px;
            flex: 1;
        }

        .testimonial-service-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 12px;
        }

        .testimonial-service-tag {
            font-size: 10px;
            letter-spacing: 1.3px;
            text-transform: uppercase;
            background: rgba(20, 78, 71, 0.06);
            border: 1px solid rgba(20, 78, 71, 0.14);
            color: var(--primary);
            padding: 5px 8px;
        }

        .testimonial-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            border-top: 1px solid rgba(20, 78, 71, 0.08);
            padding-top: 10px;
        }

        .testimonial-reviewer {
            min-width: 0;
        }

        .testimonial-reviewer-name {
            font-family: 'Cinzel', serif;
            color: var(--primary);
            font-size: 13px;
            letter-spacing: 1px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .testimonial-reviewer-date {
            color: rgba(20, 78, 71, 0.55);
            font-size: 11px;
            letter-spacing: 1.2px;
            text-transform: uppercase;
        }

        .testimonial-price {
            color: var(--gold);
            font-size: 12px;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        /* Contact Section */
        .contact {
            padding: 120px 60px;
            background: var(--white);
        }

        .contact-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
        }

        .contact-info h3 {
            font-family: 'Cinzel', serif;
            font-size: 28px;
            color: var(--primary);
            margin-bottom: 30px;
        }

        .contact-details {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 40px;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .contact-icon {
            width: 50px;
            height: 50px;
            background: var(--cream);
            border: 1px solid rgba(20, 78, 71, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .contact-icon svg {
            width: 22px;
            height: 22px;
            stroke: var(--primary);
        }

        .contact-text h4 {
            font-family: 'Cinzel', serif;
            font-size: 14px;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .contact-text p {
            font-size: 14px;
            color: rgba(20, 78, 71, 0.7);
            line-height: 1.6;
        }

        .hours-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .hour-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(20, 78, 71, 0.1);
        }

        .hour-day {
            color: rgba(20, 78, 71, 0.6);
        }

        .hour-time {
            color: var(--primary);
            font-weight: 500;
        }

        .contact-form {
            background: var(--cream);
            padding: 50px;
            border: 1px solid rgba(20, 78, 71, 0.1);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid rgba(20, 78, 71, 0.2);
            background: var(--white);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            color: var(--primary);
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--gold);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: var(--primary);
            color: var(--white);
            font-family: 'Cinzel', serif;
            font-size: 13px;
            letter-spacing: 3px;
            text-transform: uppercase;
            border: 2px solid var(--primary);
            cursor: pointer;
            transition: all 0.4s ease;
        }

        .submit-btn:hover {
            background: transparent;
            color: var(--primary);
        }

        /* Footer */
        .footer {
            background: var(--dark);
            padding: 80px 60px 40px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 60px;
        }

        .footer-brand .footer-logo {
            font-family: 'Cinzel', serif;
            font-size: 22px;
            letter-spacing: 2px;
            color: var(--white);
            margin-bottom: 20px;
        }

        .footer-brand-logo {
            width: 76px;
            height: 76px;
            margin-bottom: 16px;
            border: 1px solid rgba(210, 178, 106, 0.35);
            overflow: hidden;
            background: rgba(255, 255, 255, 0.03);
        }

        .footer-brand-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .footer-brand p {
            font-size: 14px;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 25px;
        }

        .footer-social {
            display: flex;
            gap: 15px;
        }

        .footer-social a {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(210, 178, 106, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .footer-social a:hover {
            background: var(--gold);
            border-color: var(--gold);
        }

        .footer-social a svg {
            width: 18px;
            height: 18px;
            stroke: var(--gold);
            transition: all 0.3s ease;
        }

        .footer-social a:hover svg {
            stroke: var(--primary);
        }

        .footer-links h4 {
            font-family: 'Cinzel', serif;
            font-size: 14px;
            letter-spacing: 2px;
            color: var(--gold);
            margin-bottom: 25px;
            text-transform: uppercase;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--gold);
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 60px auto 0;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-bottom p {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.4);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .hero-inner,
            .about-content,
            .contact-content {
                grid-template-columns: 1fr;
            }

            .hero-frame {
                aspect-ratio: auto;
                min-height: 0;
            }

            .hero-inner {
                height: auto;
                min-height: 0;
                gap: 30px;
            }

            .hero-content {
                order: 1;
            }

            .hero-image {
                order: 2;
                min-height: 0;
            }

            .services-grid,
            .barbers-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .gallery-item.featured {
                grid-column: span 1;
                grid-row: span 1;
            }

            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }

            .testimonials-header {
                grid-template-columns: 1fr;
                align-items: start;
            }

            .testimonial-trust-bar {
                justify-content: flex-start;
            }

            .testimonial-card {
                flex-basis: calc((100% - 18px) / 2);
            }
        }

        @media (max-width: 768px) {
            .main-nav {
                padding: 20px 30px;
            }

            .nav-logo-text {
                display: none;
            }

            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: flex;
                z-index: 1002;
            }

            .mobile-nav-panel {
                position: absolute;
                top: calc(100% + 10px);
                left: 20px;
                right: 20px;
                display: block;
                background: rgba(245, 240, 232, 0.97);
                border: 1px solid rgba(210, 178, 106, 0.35);
                box-shadow: 0 20px 40px rgba(10, 46, 42, 0.12);
                backdrop-filter: blur(14px);
                padding: 14px;
                opacity: 0;
                transform: translateY(-8px);
                pointer-events: none;
                transition: opacity 0.25s ease, transform 0.25s ease;
                z-index: 1001;
            }

            .main-nav.mobile-open .mobile-nav-panel {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }

            .mobile-nav-panel::before {
                content: '';
                position: absolute;
                inset: 8px;
                border: 1px solid rgba(20, 78, 71, 0.1);
                pointer-events: none;
            }

            .mobile-nav-links {
                display: grid;
                gap: 8px;
                position: relative;
                z-index: 1;
            }

            .mobile-nav-links a {
                display: block;
                text-decoration: none;
                color: var(--primary);
                text-transform: uppercase;
                letter-spacing: 2px;
                font-size: 12px;
                padding: 12px 14px;
                border: 1px solid rgba(20, 78, 71, 0.08);
                background: rgba(255, 255, 255, 0.35);
                transition: background 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
            }

            .mobile-nav-links a:hover,
            .mobile-nav-links a:focus-visible {
                background: rgba(210, 178, 106, 0.12);
                border-color: rgba(210, 178, 106, 0.35);
                transform: translateY(-1px);
                outline: none;
            }

            .mobile-nav-links .mobile-nav-cta {
                background: var(--primary);
                color: var(--white);
                border-color: var(--primary);
                font-family: 'Cinzel', serif;
                letter-spacing: 1.5px;
            }

            .mobile-nav-links .mobile-nav-cta:hover,
            .mobile-nav-links .mobile-nav-cta:focus-visible {
                background: var(--gold);
                color: var(--primary);
                border-color: var(--gold);
            }

            .hero {
                padding: 100px 20px 80px;
            }

            .hero-frame {
                padding: 25px;
            }

            .hero-video-stack {
                min-height: 520px;
            }

            .hero-video-card video {
                object-fit: contain;
                object-position: center center;
                background: #10211e;
            }

            .hero-video-logo-badge {
                width: 58px;
                height: 58px;
                top: 14px;
                left: 14px;
                padding: 6px;
            }

            .hero-video-label {
                left: 14px;
                bottom: 14px;
                min-width: 0;
                max-width: calc(100% - 110px);
                padding: 8px 10px;
            }

            .hero-video-label strong {
                font-size: 12px;
            }

            .hero-video-controls {
                padding: 0 8px;
            }

            .hero-video-control {
                width: 46px;
                height: 46px;
            }

            .hero-video-dots {
                bottom: 16px;
            }

            .hero-content {
                padding: 8px 0 0;
            }

            .services,
            .about,
            .gallery,
            .barbers,
            .testimonials,
            .contact {
                padding: 80px 30px;
            }

            .testimonial-carousel-shell {
                padding: 18px;
            }

            .testimonial-card {
                flex-basis: 88%;
                min-width: 88%;
                min-height: 270px;
            }

            .testimonial-arrow {
                width: 40px;
                height: 40px;
            }

            .testimonial-carousel-note {
                font-size: 11px;
                letter-spacing: 1px;
            }

            .services-grid,
            .barbers-grid,
            .footer-content {
                grid-template-columns: 1fr;
            }

            .about-features {
                grid-template-columns: 1fr;
            }

            .about-image-main.before-after {
                height: 520px;
                gap: 10px;
            }

            .about-image-accent {
                right: 0;
                bottom: 0;
                width: 160px;
                height: 160px;
            }

            .about-image-label {
                left: 10px;
                bottom: 10px;
                font-size: 9px;
                letter-spacing: 1.5px;
                padding: 7px 8px;
            }

            .about-image-divider {
                top: 14px;
                bottom: 14px;
            }

            .services-strip {
                padding: 25px 30px;
                gap: 20px;
            }

            .strip-item {
                font-size: 10px;
            }

            .contact-form {
                padding: 30px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .footer {
                padding: 60px 30px 30px;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .hours-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <a href="#" class="nav-logo">
            <div class="nav-logo-icon">
                <img src="/media/hero/royal-fern-logo.jpg" alt="Royal Fern Barber Studio logo">
            </div>
            <span class="nav-logo-text">ROYAL FERN BARBER STUDIO</span>
        </a>
        <div class="nav-links">
            <a href="#services">Services</a>
            <a href="#about">About</a>
            <a href="#gallery">Gallery</a>
            <a href="#contact">Contact</a>
            <a href="https://getsquire.com/booking/book/royalfern-barber-studio-national-city/barber/fernando-moreno-1/services" class="nav-cta" target="_blank" rel="noopener noreferrer">Book Now</a>
        </div>
        <button class="mobile-menu-btn">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="mobile-nav-panel" id="mobileNavPanel" aria-hidden="true">
            <div class="mobile-nav-links">
                <a href="#services">Services</a>
                <a href="#about">About</a>
                <a href="#gallery">Gallery</a>
                <a href="#contact">Contact</a>
                <a href="https://getsquire.com/booking/book/royalfern-barber-studio-national-city/barber/fernando-moreno-1/services" class="mobile-nav-cta" target="_blank" rel="noopener noreferrer">Book Now</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-pattern"></div>
        
        <header class="hero-header">
            <div class="hero-logo-center">
                <div class="hero-logo-icon">
                    <img src="/media/hero/royal-fern-logo.jpg" alt="Royal Fern Barber Studio logo">
                </div>
                <div class="hero-logo-text">ROYAL FERN</div>
                <div class="hero-established">Est. 2015  San Diego</div>
            </div>
        </header>

        <div class="hero-frame">
            <div class="frame-corner tl"></div>
            <div class="frame-corner tr"></div>
            <div class="frame-corner bl"></div>
            <div class="frame-corner br"></div>
            
            <div class="hero-inner">
                <div class="hero-image">
                    <div class="hero-video-stack" id="heroVideoStack" aria-label="Royal Fern Barber Studio highlights">
                        <div class="hero-video-card" data-video-index="0" data-title="Precision Fades">
                            <video autoplay muted loop playsinline preload="auto">
                                <source src="/media/hero/video1.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="hero-video-card" data-video-index="1" data-title="Chairside Details">
                            <video muted loop playsinline preload="metadata">
                                <source src="/media/hero/video2.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="hero-video-card" data-video-index="2" data-title="Studio Atmosphere">
                            <video muted loop playsinline preload="metadata">
                                <source src="/media/hero/video3.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="hero-video-card" data-video-index="3" data-title="Clean Finishing Work">
                            <video muted loop playsinline preload="metadata">
                                <source src="/media/hero/video4.mp4" type="video/mp4">
                            </video>
                        </div>

                        <div class="hero-video-overlay" aria-hidden="true">
                            <div class="hero-video-logo-badge">
                                <img src="/media/hero/royal-fern-logo.jpg" alt="">
                            </div>
                            <div class="hero-video-controls">
                                <button class="hero-video-control" type="button" data-hero-prev aria-label="Previous video">
                                    <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
                                </button>
                                <button class="hero-video-control" type="button" data-hero-next aria-label="Next video">
                                    <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                                </button>
                            </div>
                            <div class="hero-video-label">
                                <span>Royal Fern</span>
                                <strong id="heroVideoLabelText">Precision Fades</strong>
                            </div>
                            <div class="hero-video-dots" id="heroVideoDots"></div>
                        </div>
                    </div>
                    <div class="image-border"></div>
                </div>
                <div class="hero-content">
                    <h1 class="hero-title">
                        First Class Barber Shop in National City, CA
                    </h1>
                    <div class="divider">
                        <div class="divider-line"></div>
                        <div class="divider-icon"></div>
                        <div class="divider-line"></div>
                    </div>
                    <h2 class="hero-text">
                        Providing mens haircuts, fade haircuts, skin fades, taper fades, lineups, beard trims, beard shaping, and hot towel shaves in National City, Chula Vista, Bonita, Paradise Hills, and South Bay San Diego.
                    </h2>
                    <a href="https://getsquire.com/booking/book/royalfern-barber-studio-national-city/barber/fernando-moreno-1/services" class="hero-cta" target="_blank" rel="noopener noreferrer">Reserve Your Chair</a>
                </div>
            </div>
        </div>

        <div class="services-strip">
            <div class="strip-item">
                <span>Haircuts</span>
                <div class="strip-dot"></div>
            </div>
            <div class="strip-item">
                <span>Hot Towel Shaves</span>
                <div class="strip-dot"></div>
            </div>
            <div class="strip-item">
                <span>Beard Grooming</span>
                <div class="strip-dot"></div>
            </div>
            <div class="strip-item">
                <span>Facial Treatments</span>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <div class="section-header">
            <p class="section-eyebrow">What We Offer</p>
            <h2 class="section-title">Our Services</h2>
        </div>
        <div class="services-grid">
            <div class="service-card">
                <div class="service-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                        <path d="M6 4l6 16 6-16"/>
                        <circle cx="12" cy="4" r="2"/>
                        <circle cx="12" cy="20" r="2"/>
                    </svg>
                </div>
                <h3 class="service-name">Classic Haircut</h3>
                <p class="service-desc">Precision cut tailored to your style with hot towel finish and straight razor neckline.</p>
                <div class="service-price">$45 <span>+</span></div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                        <path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"/>
                        <path d="M4 6v12a2 2 0 0 0 2 2h14v-4"/>
                        <path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"/>
                    </svg>
                </div>
                <h3 class="service-name">Hot Towel Shave</h3>
                <p class="service-desc">Traditional straight razor shave with hot towels, premium oils, and aftershave balm.</p>
                <div class="service-price">$40 <span>+</span></div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                        <path d="M8 21h8a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z"/>
                        <path d="M8 3v18"/>
                        <path d="M12 7v.01"/>
                        <path d="M12 11v.01"/>
                        <path d="M12 15v.01"/>
                    </svg>
                </div>
                <h3 class="service-name">Beard Sculpting</h3>
                <p class="service-desc">Expert beard shaping and grooming with precision trimmers and straight razor detailing.</p>
                <div class="service-price">$30 <span>+</span></div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                </div>
                <h3 class="service-name">The Full Experience</h3>
                <p class="service-desc">Haircut, hot towel shave, beard trim, facial treatment, and relaxing scalp massage.</p>
                <div class="service-price">$95 <span>+</span></div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                        <path d="M12 3v18"/>
                        <path d="M8 7l4-4 4 4"/>
                        <path d="M8 17l4 4 4-4"/>
                    </svg>
                </div>
                <h3 class="service-name">Kids Cut</h3>
                <p class="service-desc">Gentle, patient service for young gentlemen under 12. Includes a lollipop reward!</p>
                <div class="service-price">$30 <span>+</span></div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                        <path d="M20.2 7.8l-7.7 7.7-4-4-5.7 5.7"/>
                        <path d="M15 7h6v6"/>
                    </svg>
                </div>
                <h3 class="service-name">Grey Blending</h3>
                <p class="service-desc">Subtle color treatment to naturally blend grey hair while maintaining a distinguished look.</p>
                <div class="service-price">$35 <span>+</span></div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="about-content">
            <div class="about-image">
                <div class="about-image-main before-after">
                    <div class="about-image-panel">
                        <img src="/media/review-photos/haircut-set-d_01.jpg" alt="Before haircut at Royal Fern Barber Studio">
                        <div class="about-image-label">Before</div>
                    </div>
                    <div class="about-image-panel">
                        <img src="/media/review-photos/haircut-set-d_02.jpg" alt="After haircut at Royal Fern Barber Studio">
                        <div class="about-image-label">After</div>
                    </div>
                    <div class="about-image-divider" aria-hidden="true"></div>
                </div>
                <div class="about-image-frame"></div>
                <div class="about-image-accent">
                    <span class="number">9+</span>
                    <span class="text">Years of<br>Excellence</span>
                </div>
            </div>
            <div class="about-text">
                <p class="section-eyebrow">Our Story</p>
                <h2>Crafting Timeless Styles Since 2015</h2>
                <p>At Royal Fern Barber Studio, we believe a great haircut is more than a serviceit's a ritual. Founded in San Diego, our studio was built around elevated craftsmanship, detail, and modern barber culture.</p>
                <p>Our master barbers combine time-honored techniques with modern styling to create looks that are both classic and contemporary. Every visit includes a complimentary beverage, hot towel treatment, and the kind of personal attention that has become rare in today's fast-paced world.</p>
                <div class="about-features">
                    <div class="about-feature">
                        <div class="about-feature-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                        </div>
                        <div class="about-feature-text">
                            <h4>Premium Products</h4>
                            <p>Only the finest grooming products</p>
                        </div>
                    </div>
                    <div class="about-feature">
                        <div class="about-feature-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                        </div>
                        <div class="about-feature-text">
                            <h4>Expert Barbers</h4>
                            <p>Years of specialized training</p>
                        </div>
                    </div>
                    <div class="about-feature">
                        <div class="about-feature-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                        </div>
                        <div class="about-feature-text">
                            <h4>Relaxing Atmosphere</h4>
                            <p>Classic ambiance, modern comfort</p>
                        </div>
                    </div>
                    <div class="about-feature">
                        <div class="about-feature-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                        </div>
                        <div class="about-feature-text">
                            <h4>Satisfaction Guaranteed</h4>
                            <p>We stand behind every cut</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="gallery" id="gallery">
        <div class="section-header">
            <p class="section-eyebrow">Our Work</p>
            <h2 class="section-title">Style Gallery</h2>
        </div>
        <div class="gallery-grid">
            <div class="gallery-item featured">
                <img src="https://images.unsplash.com/photo-1621605815971-fbc98d665033?w=800&h=800&fit=crop" alt="Classic fade haircut">
                <div class="gallery-overlay">
                    <h4>The Classic Fade</h4>
                    <p>Timeless Style</p>
                </div>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=400&h=400&fit=crop" alt="Beard grooming">
                <div class="gallery-overlay">
                    <h4>Beard Art</h4>
                    <p>Precision</p>
                </div>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1493256338651-d82f7acb2b38?w=400&h=400&fit=crop" alt="Hot towel shave">
                <div class="gallery-overlay">
                    <h4>Hot Towel</h4>
                    <p>Shave</p>
                </div>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1605497788044-5a32c7078486?w=400&h=400&fit=crop" alt="Modern pompadour">
                <div class="gallery-overlay">
                    <h4>Pompadour</h4>
                    <p>Modern</p>
                </div>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1599351431613-18ef1fdd27e1?w=400&h=400&fit=crop" alt="Textured crop">
                <div class="gallery-overlay">
                    <h4>Textured Crop</h4>
                    <p>Trending</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials">
        <div class="testimonials-content">
            <div class="testimonials-header">
                <div class="testimonials-title-wrap">
                    <p class="section-eyebrow">Client Reviews</p>
                    <h2 class="section-title">What Clients Say About Our Haircuts, Fades & Beard Trims</h2>
                </div>
                <div class="testimonial-trust-bar" id="testimonialTrustBar">
                    <div class="trust-pill"><strong>5.0</strong> Google Rating</div>
                    <div class="trust-pill"><strong>27</strong> Google Reviews</div>
                </div>
            </div>

            <div class="testimonial-carousel-shell" id="testimonialCarouselShell">
                <div class="testimonial-carousel-controls">
                    <div class="testimonial-carousel-note">Auto-scrolling Google reviews  drag or swipe to explore</div>
                    <div class="testimonial-control-group">
                        <button class="testimonial-arrow" type="button" data-testimonial-prev aria-label="Previous reviews">
                            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
                        </button>
                        <button class="testimonial-arrow" type="button" data-testimonial-next aria-label="Next reviews">
                            <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                        </button>
                    </div>
                </div>

                <div class="testimonial-viewport" id="testimonialViewport">
                    <div class="testimonial-track" id="testimonialTrack">
                        <!-- Reviews injected from /data/google-reviews.json -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="section-header">
            <p class="section-eyebrow">Get In Touch</p>
            <h2 class="section-title">Book Your Visit</h2>
        </div>
        <div class="contact-content">
            <div class="contact-info">
                <h3>Visit Us</h3>
                <div class="contact-details">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <h4>Address</h4>
                            <p>1234 Fifth Avenue<br>San Diego, CA 92101</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <h4>Phone</h4>
                            <p>(619) 555-0123</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <h4>Email</h4>
                            <p>hello@traditionbarbershop.com</p>
                        </div>
                    </div>
                </div>
                <h3 style="font-size: 20px; margin-top: 40px;">Hours</h3>
                <div class="hours-grid">
                    <div class="hour-row">
                        <span class="hour-day">Monday - Thursday</span>
                        <span class="hour-time">9AM - 8PM</span>
                    </div>
                    <div class="hour-row">
                        <span class="hour-day">Friday</span>
                        <span class="hour-time">9AM - 9PM</span>
                    </div>
                    <div class="hour-row">
                        <span class="hour-day">Saturday</span>
                        <span class="hour-time">8AM - 9PM</span>
                    </div>
                    <div class="hour-row">
                        <span class="hour-day">Sunday</span>
                        <span class="hour-time">10AM - 6PM</span>
                    </div>
                </div>
            </div>
            <form class="contact-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" placeholder="John" required>
                    </div>
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" placeholder="Doe" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" placeholder="(555) 123-4567" required>
                </div>
                <div class="form-group">
                    <label>Service</label>
                    <select required>
                        <option value="">Select a service</option>
                        <option value="haircut">Classic Haircut</option>
                        <option value="shave">Hot Towel Shave</option>
                        <option value="beard">Beard Sculpting</option>
                        <option value="full">The Full Experience</option>
                        <option value="kids">Kids Cut</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Preferred Date & Time</label>
                    <input type="datetime-local" required>
                </div>
                <div class="form-group">
                    <label>Special Requests</label>
                    <textarea placeholder="Any specific requests or notes..."></textarea>
                </div>
                <button type="submit" class="submit-btn">Book Appointment</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <div class="footer-brand-logo">
                    <img src="/media/hero/royal-fern-logo.jpg" alt="Royal Fern Barber Studio logo">
                </div>
                <div class="footer-logo">ROYAL FERN BARBER STUDIO</div>
                <p>Where timeless craftsmanship meets modern style. Experience elevated barbering at Royal Fern Barber Studio in San Diego.</p>
                <div class="footer-social">
                    <a href="#"><svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg></a>
                    <a href="#"><svg viewBox="0 0 24 24" fill="none" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></a>
                    <a href="#"><svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/></svg></a>
                </div>
            </div>
            <div class="footer-links">
                <h4>Services</h4>
                <ul>
                    <li><a href="#">Classic Haircut</a></li>
                    <li><a href="#">Hot Towel Shave</a></li>
                    <li><a href="#">Beard Sculpting</a></li>
                    <li><a href="#">The Full Experience</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Company</h4>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Our Barbers</a></li>
                    <li><a href="#">Gallery</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Contact</h4>
                <ul>
                    <li><a href="https://getsquire.com/booking/book/royalfern-barber-studio-national-city/barber/fernando-moreno-1/services" target="_blank" rel="noopener noreferrer">Book Online</a></li>
                    <li><a href="#">Call Us</a></li>
                    <li><a href="#">Gift Cards</a></li>
                    <li><a href="#">FAQs</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Royal Fern Barber Studio. All rights reserved.</p>
            <p>Crafted with precision in San Diego, CA</p>
        </div>
    </footer>

    <script>
        // Register ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);

        // Navigation scroll effect
        const nav = document.querySelector('.main-nav');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const mobileNavPanel = document.getElementById('mobileNavPanel');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        }, { passive: true });

        // Mobile nav dropdown
        (function initMobileNav() {
            if (!nav || !mobileMenuBtn || !mobileNavPanel) return;

            const setOpen = (open) => {
                nav.classList.toggle('mobile-open', open);
                mobileMenuBtn.setAttribute('aria-expanded', String(open));
                mobileNavPanel.setAttribute('aria-hidden', String(!open));
            };

            mobileMenuBtn.setAttribute('aria-label', 'Toggle menu');
            mobileMenuBtn.setAttribute('aria-expanded', 'false');

            mobileMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                setOpen(!nav.classList.contains('mobile-open'));
            });

            mobileNavPanel.querySelectorAll('a').forEach((link) => {
                link.addEventListener('click', () => setOpen(false));
            });

            document.addEventListener('click', (e) => {
                if (!nav.classList.contains('mobile-open')) return;
                if (nav.contains(e.target)) return;
                setOpen(false);
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') setOpen(false);
            });

            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) setOpen(false);
            }, { passive: true });
        })();

        // Hero Video Stack Carousel
        (function initHeroVideoStack() {
            const stack = document.getElementById('heroVideoStack');
            if (!stack) return;

            const cards = Array.from(stack.querySelectorAll('.hero-video-card'));
            const videos = cards.map(card => card.querySelector('video')).filter(Boolean);
            const dotsContainer = document.getElementById('heroVideoDots');
            const labelText = document.getElementById('heroVideoLabelText');
            const prevBtn = stack.querySelector('[data-hero-prev]');
            const nextBtn = stack.querySelector('[data-hero-next]');
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            const firstVideo = videos[0];

            let currentIndex = 0;
            let isAnimating = false;
            let leavingIndex = null;
            let leavingPhase = 'idle';
            let autoTimer = null;
            const AUTO_INTERVAL = prefersReducedMotion ? 12000 : 4500;
            let firstVideoReady = false;
            let firstVideoPrimed = false;
            let heroIntroDone = false;

            function markInitialMediaReady() {
                if (firstVideoReady) return;
                firstVideoReady = true;
                stack.classList.add('is-initial-media-ready');
            }

            function primeFirstVisibleFrame() {
                if (!firstVideo || firstVideoPrimed) return;
                firstVideoPrimed = true;
                try {
                    const target = 0.35;
                    const maxSafe = Math.max((firstVideo.duration || 1) - 0.15, 0);
                    firstVideo.currentTime = Math.min(target, maxSafe);
                } catch (_) {}
            }

            function warmHeroVideos() {
                if (!videos.length) return;

                if (firstVideo) {
                    firstVideo.preload = 'auto';
                    if (firstVideo.readyState >= 2) {
                        primeFirstVisibleFrame();
                        markInitialMediaReady();
                        tryStartInitialVideo();
                    } else {
                        firstVideo.addEventListener('loadedmetadata', primeFirstVisibleFrame, { once: true });
                        firstVideo.addEventListener('loadeddata', () => {
                            markInitialMediaReady();
                            tryStartInitialVideo();
                        }, { once: true });
                        firstVideo.addEventListener('canplay', () => {
                            markInitialMediaReady();
                            tryStartInitialVideo();
                        }, { once: true });
                    }

                    // Trigger network fetch immediately during the hero intro animation.
                    firstVideo.load();
                }

                const warmRest = () => {
                    videos.slice(1).forEach((video) => {
                        try {
                            video.preload = 'auto';
                            video.load();
                        } catch (_) {}
                    });
                };

                if ('requestIdleCallback' in window) {
                    window.requestIdleCallback(warmRest, { timeout: 1200 });
                } else {
                    setTimeout(warmRest, 500);
                }
            }

            function rel(index) {
                return (index - currentIndex + cards.length) % cards.length;
            }

            function applyCardStyles() {
                cards.forEach((card, index) => {
                    const depth = rel(index);
                    card.classList.remove('is-leaving-left', 'is-leaving-under', 'is-leaving-back');
                    if (index === leavingIndex) {
                        if (leavingPhase === 'left') card.classList.add('is-leaving-left');
                        if (leavingPhase === 'under') card.classList.add('is-leaving-under');
                        if (leavingPhase === 'back') card.classList.add('is-leaving-back');
                    }

                    let transform = 'translateX(0px) translateY(0px) rotate(0deg) scale(1)';
                    let opacity = 1;
                    let zIndex = 30;

                    if (depth === 0) {
                        transform = 'translateX(0px) translateY(0px) rotate(0deg) scale(1)';
                        opacity = 1;
                        zIndex = 30;
                    } else if (depth === 1) {
                        transform = 'translateX(14px) translateY(7px) rotate(0.9deg) scale(0.97)';
                        opacity = 0.62;
                        zIndex = 20;
                    } else if (depth === 2) {
                        transform = 'translateX(24px) translateY(13px) rotate(1.4deg) scale(0.94)';
                        opacity = 0.35;
                        zIndex = 12;
                    } else {
                        const extra = Math.min(depth, 4);
                        transform = `translateX(${30 + (extra - 3) * 4}px) translateY(${17 + (extra - 3) * 4}px) rotate(${1.6 + (extra - 3) * 0.35}deg) scale(${Math.max(0.92 - (extra - 3) * 0.02, 0.88)})`;
                        opacity = 0.16;
                        zIndex = 8 - extra;
                    }

                    card.style.transform = transform;
                    card.style.opacity = String(opacity);
                    card.style.zIndex = String(zIndex);
                });

                if (labelText) {
                    labelText.textContent = cards[currentIndex]?.dataset.title || 'Studio Highlights';
                }

                if (dotsContainer) {
                    Array.from(dotsContainer.children).forEach((dot, idx) => {
                        dot.classList.toggle('is-active', idx === currentIndex);
                    });
                }

                videos.forEach((video, idx) => {
                    if (!video) return;
                    if (idx === currentIndex) {
                        const playPromise = video.play();
                        if (playPromise && typeof playPromise.catch === 'function') {
                            playPromise.catch(() => {});
                        }
                    } else {
                        video.pause();
                    }
                });
            }

            function stopAuto() {
                if (autoTimer) {
                    clearTimeout(autoTimer);
                    autoTimer = null;
                }
            }

            function scheduleAuto() {
                stopAuto();
                if (prefersReducedMotion) return;
                autoTimer = setTimeout(() => goTo(currentIndex + 1, { animated: true }), AUTO_INTERVAL);
            }

            function playActiveVideoNow() {
                const activeVideo = videos[currentIndex];
                if (!activeVideo) return;
                activeVideo.muted = true;
                activeVideo.playsInline = true;
                const playPromise = activeVideo.play();
                if (playPromise && typeof playPromise.catch === 'function') {
                    playPromise.catch(() => {});
                }
            }

            function tryStartInitialVideo() {
                if (!heroIntroDone) return;
                if (currentIndex !== 0) return;
                if (!firstVideo || firstVideo.readyState < 2) return;
                playActiveVideoNow();
            }

            function goTo(target, options = { animated: true }) {
                if (!cards.length) return;
                const nextIndex = (target + cards.length) % cards.length;
                if (nextIndex === currentIndex || isAnimating) return;

                stopAuto();

                if (!options.animated) {
                    currentIndex = nextIndex;
                    leavingIndex = null;
                    leavingPhase = 'idle';
                    applyCardStyles();
                    scheduleAuto();
                    return;
                }

                isAnimating = true;
                leavingIndex = currentIndex;
                leavingPhase = 'left';
                applyCardStyles();

                setTimeout(() => {
                    leavingPhase = 'under';
                    applyCardStyles();
                }, 390);

                setTimeout(() => {
                    currentIndex = nextIndex;
                    leavingPhase = 'back';
                    applyCardStyles();
                }, 690);

                setTimeout(() => {
                    leavingIndex = null;
                    leavingPhase = 'idle';
                    isAnimating = false;
                    applyCardStyles();
                    scheduleAuto();
                }, 1080);
            }

            if (dotsContainer) {
                cards.forEach((_, idx) => {
                    const dot = document.createElement('button');
                    dot.type = 'button';
                    dot.className = 'hero-video-dot';
                    dot.setAttribute('aria-label', `Go to video ${idx + 1}`);
                    dot.addEventListener('click', () => goTo(idx, { animated: idx > currentIndex }));
                    dotsContainer.appendChild(dot);
                });
            }

            if (prevBtn) prevBtn.addEventListener('click', () => goTo(currentIndex - 1, { animated: false }));
            if (nextBtn) nextBtn.addEventListener('click', () => goTo(currentIndex + 1, { animated: true }));

            stack.addEventListener('mouseenter', stopAuto);
            stack.addEventListener('mouseleave', scheduleAuto);
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) stopAuto();
                else scheduleAuto();
            });

            warmHeroVideos();
            applyCardStyles();
            scheduleAuto();

            window.addEventListener('royalfern:hero-intro-complete', () => {
                heroIntroDone = true;
                tryStartInitialVideo();
            });
        })();

        // Testimonials: JSON-driven auto-scrolling review carousel (drag/swipe + arrows)
        (function initTestimonialsCarousel() {
            const shell = document.getElementById('testimonialCarouselShell');
            const viewport = document.getElementById('testimonialViewport');
            const track = document.getElementById('testimonialTrack');
            if (!shell || !viewport || !track) return;

            const prevBtn = shell.querySelector('[data-testimonial-prev]');
            const nextBtn = shell.querySelector('[data-testimonial-next]');
            const trustBar = document.getElementById('testimonialTrustBar');
            const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            let cardWidth = 320;
            let gap = 18;
            let baseCycleWidth = 0;
            let offsetX = 0;
            let rafId = null;
            let autoPaused = false;
            let dragging = false;
            let pointerId = null;
            let dragStartX = 0;
            let dragStartOffset = 0;
            let velocity = reducedMotion ? 0 : 0.42; // ~50% faster than previous
            let resumeTimer = null;

            const canonicalTag = (value) => {
                const map = {
                    'beard trim': 'Beard Trim',
                    'beard shaping': 'Beard Shaping',
                    'beard maintenance': 'Beard Maintenance',
                    'beard conditioning': 'Beard Conditioning',
                    'straight razor shave': 'Straight Razor Shave',
                    'hot towel shave': 'Hot Towel Shave',
                    'fade cut': 'Fade Cut',
                    'skin fade': 'Skin Fade',
                    'taper fade': 'Taper Fade',
                    'lineup': 'Lineup',
                    'shape up': 'Shape Up',
                    'haircut': 'Haircut',
                    'scissor cut': 'Scissor Cut',
                    'eyebrow trimming': 'Eyebrow Trimming'
                };
                const key = String(value || '').trim().toLowerCase();
                return map[key] || String(value || '').trim();
            };

            const starsMarkup = () => '<div class="testimonial-stars" aria-label="5 out of 5 stars"></div>';

            const cardTemplate = (review) => {
                const rawTags = [...(review.services_listed || []), ...(review.tags || [])]
                    .map(canonicalTag)
                    .filter(Boolean);
                const tags = [...new Set(rawTags)].slice(0, 4);
                const tagsMarkup = tags.map(tag => `<span class="testimonial-service-tag">${tag}</span>`).join('');
                const priceMarkup = review.price_range ? `<div class="testimonial-price">${review.price_range}</div>` : '';
                const safeText = (review.excerpt || review.review_text || '').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                const safeName = String(review.reviewer_name || 'Google Reviewer').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                const safeDate = String(review.date_text || '').replace(/</g, '&lt;').replace(/>/g, '&gt;');

                return `
                    <article class="testimonial-card" data-review-id="${review.id}">
                        ${starsMarkup()}
                        <p class="testimonial-card-text">${safeText}</p>
                        <div class="testimonial-service-tags">${tagsMarkup}</div>
                        <div class="testimonial-meta">
                            <div class="testimonial-reviewer">
                                <div class="testimonial-reviewer-name">${safeName}</div>
                                <div class="testimonial-reviewer-date">${safeDate || 'Google Review'}</div>
                            </div>
                            ${priceMarkup}
                        </div>
                    </article>
                `;
            };

            const render = async () => {
                try {
                    const res = await fetch('/data/google-reviews.json', { cache: 'no-store' });
                    if (!res.ok) throw new Error(`Failed to load reviews (${res.status})`);
                    const data = await res.json();
                    const reviews = Array.isArray(data.reviews) ? data.reviews : [];

                    if (trustBar && data.business_snapshot?.rating_text) {
                        const ratingMatch = String(data.business_snapshot.rating_text).match(/([0-9.]+)\s*\((\d+)\s+Google reviews\)/i);
                        if (ratingMatch) {
                            trustBar.innerHTML = `
                                <div class="trust-pill"><strong>${ratingMatch[1]}</strong> Google Rating</div>
                                <div class="trust-pill"><strong>${ratingMatch[2]}</strong> Google Reviews</div>
                            `;
                        }
                    }

                    // Prioritize richer reviews for cards shown in rotation
                    const selected = reviews
                        .slice()
                        .sort((a, b) => (b.excerpt?.length || 0) - (a.excerpt?.length || 0))
                        .slice(0, 16);

                    if (!selected.length) {
                        track.innerHTML = '<div class="testimonial-carousel-note">Reviews unavailable right now.</div>';
                        return;
                    }

                    const html = [...selected, ...selected].map(cardTemplate).join('');
                    track.innerHTML = html;

                    requestAnimationFrame(() => {
                        measure();
                        bind();
                        start();
                    });
                } catch (err) {
                    console.error(err);
                    track.innerHTML = '<div class="testimonial-carousel-note">Unable to load reviews right now.</div>';
                }
            };

            const measure = () => {
                const firstCard = track.querySelector('.testimonial-card');
                if (!firstCard) return;
                const cardRect = firstCard.getBoundingClientRect();
                const trackStyle = getComputedStyle(track);
                gap = parseFloat(trackStyle.columnGap || trackStyle.gap || '18') || 18;
                cardWidth = cardRect.width;
                const totalCards = track.querySelectorAll('.testimonial-card').length;
                baseCycleWidth = ((cardWidth + gap) * (totalCards / 2));
            };

            const normalizeOffset = () => {
                if (!baseCycleWidth) return;
                while (offsetX >= baseCycleWidth) offsetX -= baseCycleWidth;
                while (offsetX < 0) offsetX += baseCycleWidth;
            };

            const applyTransform = () => {
                normalizeOffset();
                track.style.transform = `translate3d(${-offsetX}px, 0, 0)`;
            };

            const tick = () => {
                if (!autoPaused && !dragging && !reducedMotion) {
                    offsetX += velocity;
                    applyTransform();
                }
                rafId = requestAnimationFrame(tick);
            };

            const start = () => {
                if (rafId) cancelAnimationFrame(rafId);
                applyTransform();
                rafId = requestAnimationFrame(tick);
            };

            const pauseAuto = () => {
                autoPaused = true;
                if (resumeTimer) clearTimeout(resumeTimer);
            };

            const resumeAutoLater = (delay = 1400) => {
                if (resumeTimer) clearTimeout(resumeTimer);
                resumeTimer = setTimeout(() => {
                    autoPaused = false;
                }, delay);
            };

            const stepByCards = (count) => {
                pauseAuto();
                offsetX += count * (cardWidth + gap);
                applyTransform();
                resumeAutoLater();
            };

            const onPointerDown = (e) => {
                if (e.pointerType === 'mouse' && e.button !== 0) return;
                dragging = true;
                pauseAuto();
                pointerId = e.pointerId;
                dragStartX = e.clientX;
                dragStartOffset = offsetX;
                viewport.classList.add('is-dragging');
                viewport.setPointerCapture(pointerId);
            };

            const onPointerMove = (e) => {
                if (!dragging || e.pointerId !== pointerId) return;
                const dx = e.clientX - dragStartX;
                offsetX = dragStartOffset - dx;
                applyTransform();
            };

            const onPointerUp = (e) => {
                if (!dragging || e.pointerId !== pointerId) return;
                dragging = false;
                viewport.classList.remove('is-dragging');
                try { viewport.releasePointerCapture(pointerId); } catch {}
                pointerId = null;
                resumeAutoLater(900);
            };

            let bound = false;
            const bind = () => {
                if (bound) return;
                bound = true;

                prevBtn?.addEventListener('click', () => stepByCards(-1));
                nextBtn?.addEventListener('click', () => stepByCards(1));

                viewport.addEventListener('pointerdown', onPointerDown);
                viewport.addEventListener('pointermove', onPointerMove);
                viewport.addEventListener('pointerup', onPointerUp);
                viewport.addEventListener('pointercancel', onPointerUp);
                window.addEventListener('resize', () => {
                    measure();
                    applyTransform();
                }, { passive: true });

                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) pauseAuto();
                    else resumeAutoLater(500);
                });
            };

            render();
        })();

        // Hero Animations
        const heroTl = gsap.timeline({
            delay: 0.3,
            onComplete: () => {
                window.dispatchEvent(new CustomEvent('royalfern:hero-intro-complete'));
            }
        });
        
        heroTl.from('.hero-logo-icon', {
            scale: 0,
            rotation: -180,
            duration: 1,
            ease: 'back.out(1.7)'
        })
        .from('.hero-logo-text', {
            y: 30,
            opacity: 0,
            duration: 0.8,
            ease: 'power3.out'
        }, '-=0.5')
        .from('.hero-established', {
            y: 20,
            opacity: 0,
            duration: 0.6,
            ease: 'power3.out'
        }, '-=0.4')
        .from('.frame-corner', {
            scale: 0,
            duration: 0.6,
            stagger: 0.1,
            ease: 'power3.out'
        }, '-=0.3')
        .from('.hero-frame', {
            borderColor: 'transparent',
            duration: 1,
            ease: 'power3.out'
        }, '-=0.4')
        .from('.hero-image', {
            clipPath: 'inset(0 100% 0 0)',
            duration: 1.2,
            ease: 'power4.inOut'
        }, '-=0.8')
        .from('.image-border', {
            opacity: 0,
            scale: 0.9,
            duration: 0.8,
            ease: 'power3.out'
        }, '-=0.4')
        .from('.hero-title', {
            y: 50,
            opacity: 0,
            duration: 1,
            ease: 'power3.out'
        }, '-=0.8')
        .from('.divider-line, .divider-icon', {
            scaleX: 0,
            duration: 0.8,
            stagger: 0.1,
            ease: 'power3.out'
        }, '-=0.6')
        .from('.hero-text', {
            y: 30,
            opacity: 0,
            duration: 0.8,
            ease: 'power3.out'
        }, '-=0.5')
        .from('.hero-cta', {
            y: 30,
            opacity: 0,
            duration: 0.6,
            ease: 'power3.out'
        }, '-=0.4')
        .from('.services-strip', {
            y: '100%',
            duration: 1,
            ease: 'power4.out'
        }, '-=0.5')
        .from('.strip-item', {
            opacity: 0,
            x: -30,
            duration: 0.6,
            stagger: 0.1,
            ease: 'power3.out'
        }, '-=0.5');

        // Services Section Animation
        gsap.from('.services .section-header', {
            scrollTrigger: {
                trigger: '.services',
                start: 'top 80%',
                toggleActions: 'play none none reverse',
                invalidateOnRefresh: true
            },
            y: 50,
            opacity: 0,
            immediateRender: false,
            duration: 0.8,
            ease: 'power3.out'
        });

        gsap.from('.service-card', {
            scrollTrigger: {
                trigger: '.services-grid',
                start: 'top 80%',
                toggleActions: 'play none none reverse',
                invalidateOnRefresh: true
            },
            y: 60,
            opacity: 0,
            immediateRender: false,
            duration: 0.8,
            stagger: 0.1,
            ease: 'power3.out'
        });

        // About Section Animation
        gsap.from('.about-image', {
            scrollTrigger: {
                trigger: '.about',
                start: 'top 70%',
                toggleActions: 'play none none reverse'
            },
            x: -80,
            opacity: 0,
            duration: 1,
            ease: 'power3.out'
        });

        gsap.from('.about-text', {
            scrollTrigger: {
                trigger: '.about',
                start: 'top 70%',
                toggleActions: 'play none none reverse'
            },
            x: 80,
            opacity: 0,
            duration: 1,
            ease: 'power3.out'
        });

        gsap.from('.about-feature', {
            scrollTrigger: {
                trigger: '.about-features',
                start: 'top 85%',
                toggleActions: 'play none none reverse'
            },
            y: 30,
            opacity: 0,
            duration: 0.6,
            stagger: 0.1,
            ease: 'power3.out'
        });

        // Gallery Section Animation
        gsap.from('.gallery .section-header', {
            scrollTrigger: {
                trigger: '.gallery',
                start: 'top 80%',
                toggleActions: 'play none none reverse'
            },
            y: 50,
            opacity: 0,
            duration: 0.8,
            ease: 'power3.out'
        });

        gsap.from('.gallery-item', {
            scrollTrigger: {
                trigger: '.gallery-grid',
                start: 'top 80%',
                toggleActions: 'play none none reverse'
            },
            y: 60,
            opacity: 0,
            duration: 0.8,
            stagger: 0.1,
            ease: 'power3.out'
        });

        // Testimonials Animation
        gsap.from('.testimonials-content > *', {
            scrollTrigger: {
                trigger: '.testimonials',
                start: 'top 70%',
                toggleActions: 'play none none reverse'
            },
            y: 40,
            opacity: 0,
            duration: 0.8,
            stagger: 0.2,
            ease: 'power3.out'
        });

        // Contact Section Animation
        gsap.from('.contact-info', {
            scrollTrigger: {
                trigger: '.contact',
                start: 'top 70%',
                toggleActions: 'play none none reverse'
            },
            x: -60,
            opacity: 0,
            duration: 0.8,
            ease: 'power3.out'
        });

        gsap.from('.contact-form', {
            scrollTrigger: {
                trigger: '.contact',
                start: 'top 70%',
                toggleActions: 'play none none reverse'
            },
            x: 60,
            opacity: 0,
            duration: 0.8,
            ease: 'power3.out'
        });

        const BOOKING_URL = 'https://getsquire.com/booking/book/royalfern-barber-studio-national-city/barber/fernando-moreno-1/services';

        // Form submission
        document.querySelector('.contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            window.open(BOOKING_URL, '_blank', 'noopener,noreferrer');
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Button hover micro-interactions
        document.querySelectorAll('.hero-cta, .nav-cta, .submit-btn').forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                gsap.to(btn, { scale: 1.02, duration: 0.3, ease: 'power2.out' });
            });
            btn.addEventListener('mouseleave', () => {
                gsap.to(btn, { scale: 1, duration: 0.3, ease: 'power2.out' });
            });
        });

        // Recalculate scroll triggers after media/layout settle (helps mobile hero + below-the-fold sections)
        window.addEventListener('load', () => {
            if (window.ScrollTrigger) {
                ScrollTrigger.refresh();
                setTimeout(() => ScrollTrigger.refresh(), 250);
            }
        });
    </script>
</body>
</html>
